<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />

<body>
    <div class="container" [class.active]="isActive">
        <!-- Phần login -->
        <div class="form-box login-box">
            <h2 class="title">Đăng nhập</h2>

            <!-- Error/Success Messages -->
            @if (errorMessage) {
                <div class="alert alert-error">
                    {{ errorMessage }}
                </div>
            }
            @if (successMessage) {
                <div class="alert alert-success">{{ successMessage }}</div>
            }

            <form (ngSubmit)="loginWithPassword()" #loginFormRef="ngForm">
                <div class="input-group">
                     <i class="fa-solid fa-envelope icon-info"></i>
                    <input
                        type="email"
                        placeholder="Email *"
                        [(ngModel)]="loginForm.email"
                        name="email"
                        required>
                </div>

                <div class="passwor_group">
                    <i class="fa-solid fa-lock icon-info"></i>
                    <input
                        [type]="isPassWordVisible ? 'text' : 'password'"
                        placeholder="Mật khẩu"
                        [(ngModel)]="loginForm.password"
                        name="password"
                        required>
                    @if (isPassWordVisible){
                    <i class="fa-solid fa-eye icon" (click)="togglePasswordVisibility()"></i>
                    }
                    @else{
                    <i class="fa-solid fa-eye-slash icon" (click)="togglePasswordVisibility()"></i>
                    }
                </div>
                <a id="forget_pass" href="#" (click)="resetPassword(); $event.preventDefault()">Quên mật khẩu?</a>
                <button type="submit" [disabled]="isLoading">
                    @if (isLoading) {
                        <i class="fa-solid fa-spinner fa-spin"></i> Đang xử lý...
                    } @else {
                        Đăng nhập
                    }
                </button>
            </form>
            <span>HOẶC</span>
            <button id="google-login" type="button" (click)="loginGoogle()" [disabled]="isLoading">
                <img height="20px" width="20px" src="assets/images/google-logo.png"
                    alt="">Đăng nhập bằng Google
            </button>
            <a href="" class="back"><i class="fa-solid fa-arrow-left"></i> Quay lại</a>
            
        </div>

        <!-- Phần register -->
        <div class="form-box register-box">
            <h2>Đăng ký</h2>

            <!-- Error/Success Messages -->
            @if (errorMessage) {
                <div class="alert alert-error">
                    {{ errorMessage }}
                </div>
            }
            @if (successMessage) {
                <div class="alert alert-success">{{ successMessage }}</div>
            }

            <form (ngSubmit)="registerWithPassword()" #registerFormRef="ngForm">
<!--                <div  class="name-group">-->
                  <div class="input-group name-input">
                    <i class="fa-solid fa-user icon-info"></i>
                    <input
                      type="text"
                      placeholder="Họ"
                      [(ngModel)]="registerForm.firstName"
                      name="firstName"
                      required>
                  </div>
                  <div class="input-group name-input">
                    <i class="fa-solid fa-user icon-info"></i>
                    <input
                      type="text"
                      placeholder="Tên"
                      [(ngModel)]="registerForm.lastName"
                      name="lastName"
                      required>
<!--                  </div>-->
                </div>
                <div class="input-group">
                    <i class="fa-solid fa-envelope icon-info"></i>
                    <input
                        type="email"
                        placeholder="Email *"
                        [(ngModel)]="registerForm.email"
                        name="email"
                        required>
                </div>
                <div class="input-group ">
                    <i class="fa-solid fa-phone icon-info"></i>
                    <input
                        type="tel"
                        placeholder="Số điện thoại"
                        [(ngModel)]="registerForm.phone"
                        name="phone"
                        pattern="[0-9]{10}"
                        title="nhập đúng số điện thoại"
                        required />
                </div>
                <div class="passwor_group">
                    <i class="fa-solid fa-lock icon-info"></i>
                    <input
                        [type]="isPassWordVisible ? 'text' : 'password'"
                        placeholder="Mật khẩu"
                        [(ngModel)]="registerForm.password"
                        name="password"
                        required>
                    @if (isPassWordVisible){
                    <i class="fa-solid fa-eye icon" (click)="togglePasswordVisibility()"></i>
                    }
                    @else{
                    <i class="fa-solid fa-eye-slash icon" (click)="togglePasswordVisibility()"></i>
                    }
                </div>
                <div class="passwor_group">
                    <i class="fa-solid fa-lock icon-info"></i>
                    <input
                        [type]="isPassWordVisibleconfirm ? 'text' : 'password'"
                        placeholder="Xác nhận mật khẩu"
                        [(ngModel)]="registerForm.confirmPassword"
                        name="confirmPassword"
                        required>
                    @if (isPassWordVisibleconfirm){
                    <i class="fa-solid fa-eye icon" (click)="togglePasswordVisibilityconfirm()"></i>
                    }
                    @else{
                    <i class="fa-solid fa-eye-slash icon" (click)="togglePasswordVisibilityconfirm()"></i>
                    }
                </div>
                <button type="submit" [disabled]="isLoading">
                    @if (isLoading) {
                        <i class="fa-solid fa-spinner fa-spin"></i> Đang xử lý...
                    } @else {
                        Đăng ký
                    }
                </button>
            </form>
          <span>HOẶC</span>
          <button id="google-login" type="button" (click)="loginGoogle()" [disabled]="isLoading">
            <img height="20px" width="20px" src="assets/images/google-logo.png" alt="">Đăng nhập bằng Google
          </button>
        </div>

        <!-- Panel điều hướng -->
        <div class="toggle-box">
            <div class="toggle-panel toggle-left">
                <h2>Chào mừng trở lại!</h2>
                <p class="message">Đăng nhập để tiếp tục</p>
                <button (click)="toggle(false)">Đăng nhập</button>
            </div>
            <div class="toggle-panel toggle-right">
                <h2>Xin chào bạn mới!</h2>
                <p class="message">Chưa có tài khoản? Hãy đăng ký ngay</p>
                <button (click)="toggle(true)">Đăng ký</button>
            </div>
        </div>
    </div>

</body>
